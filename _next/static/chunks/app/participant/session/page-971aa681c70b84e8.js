(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4032],{83686:function(e,t,n){Promise.resolve().then(n.bind(n,45629))},45629:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n(57437),s=n(53622),o=n(94547),r=n(78364),a=n(98641),l=n(11144),c=n(4766),u=n(93191),d=n(5085),x=n(83593),f=n(25042),h=n(52983),p=n(43670),m=n(17882),j=n(68276),g=n(53771),C=n(37471),y=n(70883),Z=n(27270),v=n(2265);let k=[o.um.Error,o.um.Disconnected,o.um.Disconnecting,o.um.Offline],E=[o.um.Online,o.um.Connecting,o.um.Connected,o.um.Joining];function b(){let e=(0,v.useContext)(y.l),t=(0,v.useContext)(C.Z),[n,s]=(0,v.useState)(e.thisUser),[r,a]=(0,v.useState)(t.state),[l,c]=(0,v.useState)(k.includes(r)),[u,d]=(0,v.useState)(E.includes(r)),[x,f]=(0,v.useState)("TODO"),[h,p]=(0,v.useState)(0);return(0,v.useEffect)(()=>{s(e.thisUser)},[e]),(0,v.useEffect)(()=>{console.debug("Connection warning, state: ".concat(o.um[t.state])),a(t.state)},[t.state,n]),(0,v.useEffect)(()=>{let e=k.includes(r),t=E.includes(r);e&&f("Disconnected from the workshop server."),t&&f("Please wait, connecting to the workshop server..."),c(e),d(t)},[r]),(0,v.useEffect)(()=>{p(l||u?1:0)},[l,u]),(0,i.jsx)(Z.Z,{variant:"filled",severity:l?"warning":"info",sx:{opacity:h},children:x})}var w=n(33351),R=n(96537),S=n(40395);function P(){let[e,t]=(0,v.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>t(!0),sx:{py:1},children:"LEAVE CALL"}),(0,i.jsx)(S.Z,{open:e,setOpen:t,onSelect:e=>{"leave"===e&&window.location.reload()},prompt:"Are you sure you want to leave the call?",options:[{key:"return",text:"RETURN TO THE CALL",filled:!0},{key:"leave",text:"LEAVE THE CALL",filled:!1}]})]})}function D(){(0,v.useContext)(d.rZ);let{session:e}=(0,v.useContext)(l.z),{slideData:t}=(0,v.useContext)(c.X),n=(0,v.useContext)(u.N),s=(0,v.useContext)(j.u),[r,a]=(0,v.useState)(!1),[C,y]=(0,v.useState)({activity:t.activity,enableExpandButton:!0,onResize:()=>{Z()},presentation:n.presentation});(0,v.useEffect)(()=>{a(e.remoteConfiguration===o.VS.RemoteWithVideoCall)},[e]),(0,v.useEffect)(()=>{y({activity:t.activity,enableExpandButton:!0,onResize:()=>{Z()},presentation:n.presentation})},[t.activity]);let Z=()=>{x.Z.emit({type:x.M.Request_SlideRefresh})};return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsxs)(w.Z,{sx:{width:"100%",height:"100%",p:1,display:"flex",flexDirection:"column"},children:[(0,i.jsx)(w.Z,{sx:{display:"block",flexGrow:1,m:0,p:0,overflow:"hidden"},children:(0,i.jsx)(p.Z,{initialCallPreferences:s.call,sx:{width:"100%",height:"100%"},children:(0,i.jsx)(h.ZP,{children:(0,i.jsx)(f.ZP,{activity:C.activity,enableExpandButton:C.enableExpandButton,onResize:C.onResize,presentation:C.presentation})})})}),(0,i.jsxs)(w.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"end",gap:2},children:[(0,i.jsx)(m.Z,{orientation:"row"}),(0,i.jsx)(w.Z,{sx:{alignSelf:"center"},children:(0,i.jsx)(P,{})})]})]}),!r&&(0,i.jsx)(w.Z,{sx:{width:"100%",height:"100%",p:1},children:n.presentation}),(0,i.jsx)(w.Z,{sx:{position:"fixed",left:4,bottom:4},children:(0,i.jsx)(b,{})}),(0,i.jsx)(w.Z,{sx:{position:"fixed",right:4,bottom:4},children:(0,i.jsx)(g.Z,{})})]})}function L(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.Z,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:o._b.Client,children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(D,{})]})})}var O=n(16463);function _(){let e=(0,O.useSearchParams)(),t=e.get("sid"),n=e.get("code"),o="true"===e.get("refresh");return null===t||null===n?(0,i.jsx)("p",{children:"Missing session id or join code"}):(0,i.jsx)(s.Z,{searchParams:e,children:(0,i.jsx)(L,{sid:t,joinCode:n,refresh:o})})}},53771:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(57437),s=n(22960),o=n(31193),r=n(40468),a=n(2265),l=n(2057),c=n(23447);function u(e){let{runningTasks:t,waitingTasks:n,failedTasks:u}=(0,a.useContext)(c.E),d=(0,s.Z)(),x={[l.l.Waiting]:d.palette.taskWaiting.main,[l.l.Ready]:d.palette.taskReady.main,[l.l.Running]:d.palette.taskRunning.main,[l.l.Success]:d.palette.taskSuccess.main,[l.l.Failed]:d.palette.taskFailed.main,[l.l.Cancelled]:d.palette.taskCancelled.main},f=e=>{let{task:t}=e,n=t.initProps.indicator,s=!1;switch(t.state){case l.l.Waiting:n+=" (retry)",s=!0;break;case l.l.Ready:case l.l.Running:n+="...",s=!0}return(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",borderRadius:1,backgroundColor:"white",border:1,borderColor:x[t.state],borderBottom:4,borderBottomColor:x[t.state],opacity:.75,py:1,px:2},children:[s&&(0,i.jsx)(r.Z,{size:"1rem"}),n]})};return(0,a.useEffect)(()=>{console.debug("Running tasks: ".concat(t.length))},[t]),(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.showRunning&&t.filter(e=>void 0!==e.initProps.indicator).map(e=>(0,i.jsx)(f,{task:e},"task-vis-".concat(e.id,"-").concat(l.l[e.state]))),n.filter(e=>void 0!==e.initProps.indicator).map(e=>(0,i.jsx)(f,{task:e},"task-vis-".concat(e.id,"-").concat(l.l[e.state])))]})}}},function(e){e.O(0,[2908,6444,6221,1866,3732,3887,4403,2153,7483,752,8768,4275,3447,5042,6413,2971,7023,1744],function(){return e(e.s=83686)}),_N_E=e.O()}]);