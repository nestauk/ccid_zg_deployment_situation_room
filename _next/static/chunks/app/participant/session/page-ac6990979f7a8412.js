(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(e,i,t){Promise.resolve().then(t.bind(t,48547))},48547:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return M}});var n=t(57437),s=t(53622),l=t(94547),o=t(78364),d=t(2265),r=t(4766),c=t(93191),a=t(31193),u=t(58433),x=t(15785),f=t(96537),h=t(69065),v=t(66124),j=t(60335),m=t(80511),p=t(7630);function g(){let[e,i]=(0,d.useState)(!1),t=()=>{i(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>{i(!0)},children:"LEAVE CALL"}),(0,n.jsx)(h.Z,{fullWidth:!0,maxWidth:"sm",open:e,onClose:t,children:(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(a.Z,{style:{position:"absolute",top:0,right:0},children:(0,n.jsx)(j.Z,{"aria-label":"close",onClick:t,children:(0,n.jsx)(p.Z,{})})}),(0,n.jsxs)(a.Z,{sx:{p:2},display:"flex",flexDirection:"column",alignItems:"center",children:[(0,n.jsx)(m.Z,{variant:"h4",sx:{width:"75%"},style:{textAlign:"center"},children:"Are you sure you want to leave the call?"}),(0,n.jsx)(f.Z,{sx:{mt:4,width:"66%"},variant:"contained",color:"buttonStandard",onClick:()=>{i(!1)},children:"RETURN TO THE CALL"}),(0,n.jsx)(f.Z,{sx:{mt:2,width:"66%"},variant:"outlined",color:"buttonStandard",onClick:()=>{i(!1),window.location.reload()},children:"LEAVE THE CALL"})]})]})})]})}var Z=t(6722),w=t(8963),b=t(31164),C=t(5085),D=t(70883),S=t(68276),y=t(64463);function I(e){let i=(0,Z.HI)(),t=(0,Z.Onx)(),s=(0,Z.ULf)(),l=(0,Z.m6Y)(),o=(0,Z.fjl)(),[r,c]=(0,d.useState)(t.isVideoEnabled),[a,u]=(0,d.useState)(!i.muted),[x,f]=(0,d.useState)(void 0),[h,v]=(0,d.useState)(void 0),[j,m]=(0,d.useState)([]),[p,g]=(0,d.useState)([]),[b,C]=(0,d.useState)(!1);(0,d.useEffect)(()=>{o.subscribeToMeetingStatus(e=>{if(e===Z.ytK.Succeeded){var n,s;null===(n=o.audioVideo)||void 0===n||n.listVideoInputDevices().then(e=>{m(e),f(e.find(e=>e.deviceId===o.selectedVideoInputDevice))}),null===(s=o.audioVideo)||void 0===s||s.listAudioInputDevices().then(e=>{g(e),v(e.find(e=>e.deviceId===o.selectedAudioInputDevice))}),c(t.isVideoEnabled),u(!i.muted),o.subscribeToSelectedAudioInputDevice(D),o.subscribeToSelectedVideoInputDevice(S)}})},[]);let D=e=>{(0,Z.Zws)(e).then(e=>{v(p.find(i=>i.deviceId===e))})},S=e=>{(0,Z.Zws)(e).then(e=>{f(j.find(i=>i.deviceId===e))})};(0,d.useEffect)(()=>{c(t.isVideoEnabled)},[t.isVideoEnabled]),(0,d.useEffect)(()=>{u(!i.muted)},[i.muted]);let I=async(e,i)=>{try{var n;let l=null!==(n=null==i?void 0:i.deviceId)&&void 0!==n?n:await (0,Z.Zws)(s.selectedDevice);if((0,w.isVideoTransformDevice)(s.selectedDevice)){if(C(!0),"chooseNewInnerDevice"in s.selectedDevice)l=selectedDevice.chooseNewInnerDevice(deviceId);else throw"Transform device cannot choose new inner device"}t.isVideoEnabled?await o.startVideoInputDevice(l):o.selectVideoInputDevice(l),e!==t.isVideoEnabled&&t.toggleVideo()}catch(e){console.error("Failed to select video input device")}finally{C(!1)}},E=async(e,t)=>{var n;let s=await (0,Z.Zws)(l.selectedDevice),d=null!==(n=null==t?void 0:t.deviceId)&&void 0!==n?n:s;d!==s&&await o.startAudioInputDevice(d),i.muted===e&&i.toggleMute()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.Z,{direction:e.orientation,videoEnabled:r,audioEnabled:a,videoDevice:x,audioDevice:h,videoDevices:j,audioDevices:p,onVideoPreferenceChange:I,onAudioPreferenceChange:E,busy:b})})}var E=t(75511),V=t(97340),A=t(28801),L=t(11144),k=t(53771);let T={[x.S.default]:4,[x.S.deliberation]:8},N={[x.S.default]:0,[x.S.deliberation]:1};function P(){var e;let i=(0,d.useContext)(C.rZ),{session:t}=(0,d.useContext)(L.z),s=(0,d.useContext)(r.X),o=(0,d.useContext)(D.l),x=(0,d.useContext)(c.N),f=(0,d.useContext)(S.u),h=new w.ConsoleLogger("Zeitgeist meeting",w.LogLevel.OFF),v=t.remoteConfiguration===l.VS.RemoteWithVideoCall,j=v?T[s.data.activity]:0,m=v?12-j:12,p=N[s.data.activity],y=v&&0===p,P=v&&1===p;(0,d.useEffect)(()=>{E.Z.emit({type:E.z.Request_SlideRefresh})},[j]);let F=(0,d.useMemo)(()=>function(e){let{showMeeting:i,children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[!i&&t,i&&(0,n.jsx)(Z.ikO,{logger:h,children:(0,n.jsx)(Z.BAg,{children:(0,n.jsx)(Z.lUb,{children:t})})})]})},[v]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(F,{showMeeting:v,children:[(0,n.jsx)(a.Z,{display:"flex",flexDirection:"column",justifyItems:"flex-start",sx:{width:"100vw",height:"100vh",p:2},children:(0,n.jsxs)(u.ZP,{container:!0,spacing:2,flexGrow:1,children:[v&&(0,n.jsxs)(u.ZP,{item:!0,xs:j,display:"flex",flexDirection:"column",children:[(0,n.jsx)(V.Z,{sx:{flexGrow:1},children:(0,n.jsx)(b.Z,{role:i.role,facilitationState:t.facilitationState,sid:t.id,sessionToken:i.sessionToken,participantId:i.deviceId,participantName:null===(e=o.thisUser)||void 0===e?void 0:e.participantName,initialCallPreferences:f.call,sx:{width:"100%",height:"100%"}})}),y&&(0,n.jsx)(a.Z,{alignSelf:"center",sx:{mt:2},children:(0,n.jsx)(I,{orientation:"row"})})]}),(0,n.jsxs)(u.ZP,{item:!0,xs:m,display:"flex",flexDirection:"column",children:[v&&(0,n.jsx)(V.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:x.presentation}),!v&&x.presentation,P&&(0,n.jsx)(a.Z,{flexGrow:1,alignSelf:"stretch",display:"flex",flexDirection:"column",justifyContent:"flex-end",sx:{mt:2},children:(0,n.jsxs)(a.Z,{alignSelf:"stretch",display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,n.jsx)(I,{orientation:"row"}),(0,n.jsx)(a.Z,{alignSelf:"stretch",alignContent:"center",children:(0,n.jsx)(g,{})})]})})]})]})}),(0,n.jsx)(a.Z,{sx:{position:"fixed",left:4,bottom:4},children:(0,n.jsx)(A.Z,{})}),(0,n.jsx)(a.Z,{sx:{position:"fixed",right:4,bottom:4},children:(0,n.jsx)(k.Z,{})})]})})}var F=t(98641);function _(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(F.Z,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:l._b.Client,children:[(0,n.jsx)(o.Z,{}),(0,n.jsx)(P,{})]})})}var O=t(16463);function M(){let e=(0,O.useSearchParams)(),i=e.get("sid"),t=e.get("code"),l="true"===e.get("refresh");return null===i||null===t?(0,n.jsx)("p",{children:"Missing session id or join code"}):(0,n.jsx)(s.Z,{searchParams:e,children:(0,n.jsx)(_,{sid:i,joinCode:t,refresh:l})})}}},function(e){e.O(0,[49,908,444,866,221,732,887,403,465,810,811,973,457,971,23,744],function(){return e(e.s=83686)}),_N_E=e.O()}]);