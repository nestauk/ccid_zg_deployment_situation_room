(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{7251:function(e,i,t){Promise.resolve().then(t.bind(t,66977))},66977:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return ej}});var s,n,o,r,l=t(57437),a=t(96537),c=t(88620),d=t(2265),u=t(67022),h=t(94547),p=t(20920);let f=e=>{var i;return(null==e?void 0:null===(i=e.profile)||void 0===i?void 0:i.hasOwnProperty("cognito:groups"))?e.profile["cognito:groups"]:[]},x=e=>e.includes(h.SC[h.SC.administrators]),m=e=>e.includes(h.SC[h.SC.analysts])||x(e),g=e=>e.includes("facilitators")||x(e)||!0,v=(0,d.createContext)({});function w(e){var i;let[t,s]=(0,d.useState)((null===(i=window)||void 0===i?void 0:i.localStorage.getItem("DeviceId"))||(0,p.Z)());(0,d.useEffect)(()=>{window&&window.localStorage.setItem("DeviceId",t)},[t]);let[n,o]=(0,d.useState)(!1),[r,h]=(0,d.useState)(null),[x,m]=(0,d.useState)(e.role),g=(0,u.aC)(),w=async()=>{await g.removeUser(),h(null)};(0,d.useEffect)(()=>g.events.addAccessTokenExpiring(async()=>{console.debug("Access token renewal with auth.signinSilent()...");let e=await g.signinSilent();console.debug("User renewal: ".concat(e?"found":"not found")),h(e)}),[g.events,g.signinSilent]);let[b,y]=(0,d.useState)({user:r,role:x,deviceId:t,groups:[],onSignOut:w});(0,d.useEffect)(()=>{y({...b,role:x})},[x]),(0,d.useEffect)(()=>{y({...b,deviceId:t})},[t]),(0,d.useEffect)(()=>{y({...b,user:r,groups:f(r)})},[r]);let j=async()=>{try{o(!0);let e=await g.signinSilent();null===e?await g.signinRedirect():h(e)}finally{o(!1)}};return(0,d.useEffect)(()=>{!g.isLoading&&g.user&&h(g.user)},[g.isLoading]),(0,l.jsxs)(l.Fragment,{children:[(n||g.isLoading)&&(0,l.jsx)(c.Z,{isError:!1,isBusy:!0,title:"Checking authentication...",message:"Please wait while we confirm permission to access the facilitator overview.",showProgress:!1}),!g.isLoading&&!n&&(0,l.jsxs)(l.Fragment,{children:[null===r&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.Z,{isError:!1,isBusy:!1,title:"Please sign in",message:"Please sign in to use the facilitator overview.",showProgress:!1,children:(0,l.jsx)(a.Z,{variant:"contained",onClick:()=>j(),disabled:n,children:"Sign in"})})}),(null==r?void 0:r.expired)&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.Z,{isError:!0,isBusy:!1,title:"Authentication expired",message:"Please sign in again to use the facilitator overview.",showProgress:!1,children:(0,l.jsx)(a.Z,{variant:"contained",onClick:()=>j(),disabled:n,children:"Sign in"})})}),null!==b.user&&!b.user.expired&&(0,l.jsx)(v.Provider,{value:b,children:e.children})]})]})}var b=t(32184),y=t(57300),j=t(80511),S=t(31193),Z=t(27270);function k(){let e=(0,d.useContext)(v);return(0,l.jsx)(l.Fragment,{children:e.user.profile.email})}function T(e){let[i,t]=(0,d.useState)(0),s=(0,d.useContext)(v),[n,r]=(0,d.useState)([]);return(0,d.useEffect)(()=>{let e=[];g(s.groups)&&e.push(0),m(s.groups)&&e.push(1),r(e)},[s.groups]),(0,d.useEffect)(()=>{console.log("Selection",o[i]),e.onSetSelection(i)},[i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.Z,{children:n.map(e=>(0,l.jsx)(y.Z,{onClick:()=>t(e),selected:i==e,children:(0,l.jsxs)(j.Z,{variant:"h5",children:[(0,l.jsx)("img",{src:"/icons/workshops.svg",style:{height:26,verticalAlign:"middle",marginRight:12}}),o[e]]})},"facilitator-overview-menu-item-".concat(o[e])))}),e.showUsername&&(0,l.jsx)(S.Z,{sx:{position:"absolute",left:"1em",bottom:"1em",zIndex:100},children:(0,l.jsxs)(Z.Z,{severity:"success",action:e.showSignOut?(0,l.jsx)(a.Z,{color:"inherit",size:"small",onClick:s.onSignOut,children:"Sign out"}):void 0,children:["Signed in as: ",(0,l.jsx)(k,{})]})})]})}(s=o||(o={}))[s.Workshops=0]="Workshops",s[s.Reports=1]="Reports";var D=t(20909),C=t(79393),E=t(99128),A=t(45133),P=t(63742),U=t(16463),R=t(10105),W=t(7547),I=t(19783);let _=(e,i)=>new Date(new Date(e).getTime()+6e4*i),L=e=>{window.open((0,R.k)(e),"_blank","noreferrer")};function F(e){var i,t,s;let[n,o]=(0,d.useState)();return(0,d.useEffect)(()=>{I.toDataURL((0,R.v)(e.session)).then(e=>{o(e)}).catch(e=>{o(void 0),console.error(e)})},[e.session]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",alignItems:"flex-start",sx:{mb:2,py:1},children:[n&&(0,l.jsx)(S.Z,{sx:{mr:2},children:(0,l.jsx)("img",{src:n,style:{width:150,height:150}})}),(0,l.jsxs)(S.Z,{display:"flex",flexGrow:1,flexDirection:"column",sx:{mr:4},children:[(0,l.jsx)(j.Z,{variant:"h4",children:e.session.sessionName}),(0,l.jsx)(j.Z,{variant:"body1",sx:{mt:1},children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:e.session.sessionDescription}})})]}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:1,children:(0,l.jsx)(a.Z,{fullWidth:!0,variant:"outlined",color:"buttonStandard",onClick:()=>e.onEditSession(e.session),children:"Edit"})})]}),(0,l.jsxs)(b.Z,{children:[(0,l.jsx)(W.ZP,{children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-type.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"TYPE"}),(0,l.jsxs)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:[h.VS[e.session.remoteConfiguration]," ",h.EQ[e.session.audience]]})]})]})}),e.session.location&&(0,l.jsx)(W.ZP,{children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-location.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"LOCATION"}),(0,l.jsx)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:null!==(i=e.session.location)&&void 0!==i?i:"(not specified)"})]})]})}),(0,l.jsx)(W.ZP,{children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-date.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"DATE"}),(0,l.jsx)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:new Date(e.session.sessionStartTime).toISOString().substring(0,10)})]})]})}),(0,l.jsx)(W.ZP,{children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-time.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"TIME"}),(0,l.jsx)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:"".concat(new Date(e.session.sessionStartTime).toLocaleTimeString()," - ").concat(_(e.session.sessionStartTime,e.session.sessionDurationMins).toLocaleTimeString())})]})]})}),(0,l.jsx)(W.ZP,{children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-participants.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"PARTICIPANTS"}),(0,l.jsx)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:null!==(t=e.session.anticipatedParticipants)&&void 0!==t?t:"(not specified)"})]})]})}),(0,l.jsx)(W.ZP,{children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-participants.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"FACILITATOR"}),(0,l.jsx)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:null!==(s=e.session.facilitatorEmail)&&void 0!==s?s:"(not specified)"})]})]})}),(0,l.jsx)(y.Z,{onClick:()=>{var i;null===(i=navigator)||void 0===i||i.clipboard.writeText((0,R.v)(e.session))},children:(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",children:[(0,l.jsx)("img",{src:"/icons/session-type.svg",style:{height:32,verticalAlign:"middle",marginRight:12}}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(j.Z,{variant:"body2",children:"JOIN CODE"}),(0,l.jsx)(j.Z,{variant:"body1",style:{fontWeight:"bold"},children:e.session.joinCode})]})]})})]}),(0,l.jsxs)(S.Z,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"stretch",gap:2,pt:1,borderTop:"solid 1px black"},children:[(0,l.jsx)(a.Z,{variant:"contained",color:"buttonStandard",sx:{flexGrow:1},onClick:()=>L(e.session),children:"Enter workshop"}),(0,l.jsx)(a.Z,{variant:"contained",color:"buttonStandard",sx:{flexGrow:1},onClick:()=>{var i;null===(i=navigator)||void 0===i||i.clipboard.writeText((0,R.v)(e.session))},children:"Copy participant link"})]})]})}var O=t(69065),N=t(66124),q=t(60335),z=t(18502),G=t(80824),Q=t(28549),M=t(56065),J=t(19004),V=t(11656),B=t(66858),Y=t(98784),H=t(7630),X=t(54952),K=t(39986),$=t(5069),ee=t(62737),ei=t.n(ee),et=t(47109),es=t(24072),en=t(76396);let eo=[{title:"Zeitgeist demo",description:"A Zeitgeist demonstration workshop.",duration_mins:15,audience:h.EQ.DemoWorkshop,slug:"zg-demo",uris:["/workshops/zg-demo/presentation.xml"]},{title:"Zeitgeist gallery",description:"A Zeitgeist gallery workshop (for testing).",duration_mins:15,audience:h.EQ.TestingWorkshop,slug:"zg-gallery",uris:["/workshops/zg-welcome/presentation.xml","/workshops/zg-gallery/presentation.xml"]},{title:"Situation Room: Water Scarcity",description:"<p>The increasing floods and drought seen across the country in recent years are showing us some of the impacts from climate change. We need to work together to come up with a plan.</p><p><i>Step into The Situation Room, where you will decide how to deal with issues such as flooding, water scarcity and coastal erosion. A series of videos will introduce you to the topic, and youâ€™ll vote on different options to minimise the impact of climate change with your fellow participants. Can you create a successful strategy for your local area?</i></p>",duration_mins:120,audience:h.EQ.LiveWorkshop,slug:"sr-water-scarcity",uris:["/workshops/sr-a-intro/presentation.xml","/workshops/sr-b-water-scarcity/0-start.xml","/workshops/sr-b-water-scarcity/1-reuse.xml","/workshops/sr-b-water-scarcity/2-reduce.xml","/workshops/sr-b-water-scarcity/3-restrict.xml","/workshops/sr-b-water-scarcity/4-end.xml","/workshops/sr-z-outro/presentation.xml"]},{title:"Situation Room: Coastal Erosion and Flooding",description:"<p>The increasing floods and drought seen across the country in recent years are showing us some of the impacts from climate change. We need to work together to come up with a plan.</p><p><i>Step into The Situation Room, where you will decide how to deal with issues such as flooding, water scarcity and coastal erosion. A series of videos will introduce you to the topic, and youâ€™ll vote on different options to minimise the impact of climate change with your fellow participants. Can you create a successful strategy for your local area?</i></p>",duration_mins:120,audience:h.EQ.LiveWorkshop,slug:"sr-coastal-erosion",uris:["/workshops/sr-a-intro/presentation.xml","/workshops/sr-c-coastal-erosion/0-start.xml","/workshops/sr-c-coastal-erosion/1-pfr.xml","/workshops/sr-c-coastal-erosion/2-engineered.xml","/workshops/sr-c-coastal-erosion/3-nature.xml","/workshops/sr-c-coastal-erosion/4-rollback.xml","/workshops/sr-c-coastal-erosion/5-end.xml","/workshops/sr-z-outro/presentation.xml"]},{title:"Situation Room: Inland Flooding",description:"<p>The increasing floods and drought seen across the country in recent years are showing us some of the impacts from climate change. We need to work together to come up with a plan.</p><p><i>Step into The Situation Room, where you will decide how to deal with issues such as flooding, water scarcity and coastal erosion. A series of videos will introduce you to the topic, and youâ€™ll vote on different options to minimise the impact of climate change with your fellow participants. Can you create a successful strategy for your local area?</i></p>",duration_mins:120,audience:h.EQ.LiveWorkshop,slug:"sr-inland-flooding",uris:["/workshops/sr-a-intro/presentation.xml","/workshops/sr-d-inland-flooding/0-start.xml","/workshops/sr-d-inland-flooding/1-pfr.xml","/workshops/sr-d-inland-flooding/2-suds.xml","/workshops/sr-d-inland-flooding/3-engineered.xml","/workshops/sr-d-inland-flooding/4-nature.xml","/workshops/sr-d-inland-flooding/5-end.xml","/workshops/sr-z-outro/presentation.xml"]}];Object.values(h.VS).filter(e=>!isNaN(Number(e))).map(e=>Number(e));let er=[{value:h.EQ.LiveWorkshop,title:"Live workshop",description:"A live session with real participants."},{value:h.EQ.DemoWorkshop,title:"Demo workshop",description:"A demonstration workshop."},{value:h.EQ.TestingWorkshop,title:"Test workshop",description:"A test workshop, to review content or test new features."}],el=e=>{let i=parseInt(e);return isNaN(i)?void 0:i};function ea(e){let i=(0,d.useContext)(v),t=()=>{var e;return null!==(e=i.user.profile.email)&&void 0!==e?e:"Unknown facilitator"},[s,n]=(0,d.useState)(),[o,r]=(0,d.useState)(),[c,u]=(0,d.useState)(!1),[p,f]=(0,d.useState)(),[x,m]=(0,d.useState)(),[g,w]=(0,d.useState)(),[b,y]=(0,d.useState)(),[j,Z]=(0,d.useState)(),[k,T]=(0,d.useState)(),[D,C]=(0,d.useState)(),[E,A]=(0,d.useState)(),[P,U]=(0,d.useState)(),[R,W]=(0,d.useState)(),[I,_]=(0,d.useState)(),[L,F]=(0,d.useState)(),[ee,ea]=(0,d.useState)(),[ec,ed]=(0,d.useState)(),[eu,eh]=(0,d.useState)(),[ep,ef]=(0,d.useState)();(0,d.useEffect)(()=>{var i,t;n(null!==(t=null===(i=e.prefill)||void 0===i?void 0:i.sessionSlug)&&void 0!==t?t:"")},[e.open,e.prefill]),(0,d.useEffect)(()=>{r(eo.find(e=>e.slug===s))},[s,e.prefill]),(0,d.useEffect)(()=>{var i,s,n,r,l,a,c,d,p,x,g,v,b,j,S,k,T;console.debug("selected template",o),f(null!==(j=null===(i=e.prefill)||void 0===i?void 0:i.sessionName)&&void 0!==j?j:null==o?void 0:o.title),m(void 0),w(null!==(S=null===(s=e.prefill)||void 0===s?void 0:s.sessionDescription)&&void 0!==S?S:null==o?void 0:o.description),y(void 0),ea((null===(n=e.prefill)||void 0===n?void 0:n.sessionDurationMins)!==void 0?null===(r=e.prefill)||void 0===r?void 0:r.sessionDurationMins:null==o?void 0:o.duration_mins),ed(void 0),Z((null===(l=e.prefill)||void 0===l?void 0:l.audience)!==void 0?null===(a=e.prefill)||void 0===a?void 0:a.audience:null==o?void 0:o.audience),C((null===(c=e.prefill)||void 0===c?void 0:c.remoteConfiguration)!==void 0?e.prefill.remoteConfiguration:void 0!==o?h.VS.InPerson:void 0),A(void 0),U((null!==(k=null===(d=e.prefill)||void 0===d?void 0:d.facilitatorEmail)&&void 0!==k?k:void 0!==o)?t():void 0),W(void 0),_((null===(p=e.prefill)||void 0===p?void 0:p.sessionStartTime)!==void 0?ei()(null===(x=e.prefill)||void 0===x?void 0:x.sessionStartTime):void 0!==o?ei()():void 0),F(void 0),eh((null!==(T=null===(g=e.prefill)||void 0===g?void 0:g.location)&&void 0!==T?T:void 0!==o)?"":void 0),ef((null===(v=e.prefill)||void 0===v?void 0:v.anticipatedParticipants)!==void 0?null===(b=e.prefill)||void 0===b?void 0:b.anticipatedParticipants:void 0!==o?12:void 0),u(void 0!==o)},[o,e.prefill]);let ex=()=>{let e=!0;return void 0===p||p.trim().length<1?(m("Title is required"),e=!1):m(void 0),void 0===g||g.trim().length<1?(y("Description is required"),e=!1):y(void 0),void 0===I?(F("Start date is required"),e=!1):F(void 0),void 0===ee||ee<1?(ed("Duration is required"),e=!1):ed(void 0),void 0===D?(A("Remote configuration is required"),e=!1):A(void 0),void 0===j?(T("Audience is required"),e=!1):T(void 0),void 0===P||P.trim().length<1?(W("Facilitator is required"),e=!1):W(void 0),e},em=()=>{e.busy||e.onCloseRequest()},eg=e=>(0,l.jsx)(es.ZP,{variant:"popover",popupId:e.id,children:i=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(q.Z,{sx:{alignSelf:"start"},"aria-label":e.description,...(0,en.LI)(i),children:(0,l.jsx)(et.Z,{})}),(0,l.jsx)(z.ZP,{...(0,en.ZW)(i),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,l.jsx)(S.Z,{sx:{p:1},children:e.children})})]})});return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(O.Z,{fullWidth:!0,maxWidth:"sm",open:e.open,onClose:em,children:[(0,l.jsxs)(G.Z,{children:[void 0!==e.prefill?"Edit":"Create new"," session",(0,l.jsx)(S.Z,{style:{position:"absolute",top:0,right:0},children:(0,l.jsx)(q.Z,{"aria-label":"close",onClick:em,children:(0,l.jsx)(H.Z,{})})})]}),(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{sx:{p:1},display:"flex",flexDirection:"column",alignItems:"stretch",gap:2,children:[(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsxs)(Q.Z,{fullWidth:!0,children:[(0,l.jsx)(M.Z,{id:"new-session-template-label",children:"Workshop"}),(0,l.jsx)(J.Z,{labelId:"new-session-template-label",value:null!=s?s:"",label:"Workshop",required:!0,disabled:e.busy,onChange:e=>n(e.target.value),children:eo.map(e=>(0,l.jsx)(V.Z,{value:e.slug,children:e.title},"session-template-option-".concat(e.slug)))})]})}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:[(0,l.jsxs)(Q.Z,{fullWidth:!0,children:[(0,l.jsx)(M.Z,{id:"new-session-audience-label",children:"Audience"}),(0,l.jsx)(J.Z,{labelId:"new-session-audience-label",value:null!=j?j:"",label:"Audience",required:!0,disabled:!c||e.busy,onChange:e=>Z(e.target.value),children:er.map(e=>(0,l.jsx)(V.Z,{value:e.value,children:e.title},"session-audience-option-".concat(e.value)))})]}),(0,l.jsxs)(eg,{id:"session-audience-info-popup",description:"Workshop audience info",children:[(0,l.jsx)("p",{children:"Choose between:"}),(0,l.jsx)("ul",{children:er.map(e=>(0,l.jsxs)("li",{children:[(0,l.jsx)("b",{children:e.title}),": ",e.description]},"session-audience-info-".concat(e.value)))})]})]}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(B.Z,{fullWidth:!0,label:"Session title",value:null!=p?p:"",required:!0,onChange:e=>f(e.target.value),disabled:!c||e.busy,error:!!x,helperText:x})}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(B.Z,{fullWidth:!0,label:"Session description",value:null!=g?g:"",required:!0,onChange:e=>w(e.target.value),disabled:!c||e.busy,error:!!b,helperText:b})}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(X._,{dateAdapter:$.y,children:(0,l.jsx)(K.x,{label:"Session start",value:void 0!==I?I:null,onChange:e=>_(null!=e?e:void 0),disabled:!c||e.busy,slotProps:{textField:{fullWidth:!0,required:!0,error:!!L,helperText:L}}})})}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(B.Z,{fullWidth:!0,inputProps:{type:"number"},label:"Duration (mins)",value:null!=ee?ee:"",required:!0,onChange:e=>ea(el(e.target.value)),disabled:!c||e.busy,error:!!ec,helperText:ec})}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:[(0,l.jsxs)(Q.Z,{fullWidth:!0,children:[(0,l.jsx)(M.Z,{id:"new-session-remote-config-label",children:"Remote configuration"}),(0,l.jsxs)(J.Z,{labelId:"new-session-remote-config-label",value:null!=D?D:"",label:"Remote configuration",required:!0,onChange:e=>C(e.target.value),disabled:!c||e.busy,error:!!E,children:[(0,l.jsx)(V.Z,{value:h.VS.InPerson,children:"In person"}),(0,l.jsx)(V.Z,{value:h.VS.Remote,children:"Remote"}),(0,l.jsx)(V.Z,{value:h.VS.RemoteWithVideoCall,children:"Remote (with video call)"})]})]}),(0,l.jsx)(eg,{id:"remote-config-info-popup",description:"Remote configuration info",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"In person: Audio plays from facilitator only"}),(0,l.jsx)("li",{children:"Remote: Audio plays from all devices"}),(0,l.jsx)("li",{children:"Remote with video call: Audio plays from all devices, embedded video call"})]})})]}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(B.Z,{fullWidth:!0,label:"Facilitator",value:null!=P?P:"",onChange:e=>U(e.target.value),required:!0,disabled:!c||e.busy,error:!!R,helperText:R})}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(B.Z,{fullWidth:!0,label:"Location",value:null!=eu?eu:"",onChange:e=>eh(e.target.value),disabled:!c||e.busy})}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(B.Z,{fullWidth:!0,label:"Anticipated participants",inputProps:{type:"number"},value:null!=ep?ep:"",onChange:e=>ef(el(e.target.value)),disabled:!c||e.busy})})]})}),(0,l.jsxs)(Y.Z,{children:[(0,l.jsx)(a.Z,{variant:"outlined",onClick:em,disabled:e.busy,children:"Cancel"}),(0,l.jsx)(a.Z,{variant:"outlined",onClick:()=>{e.onClearRequest(),n(void 0)},disabled:e.busy,children:"Clear"}),(0,l.jsx)(a.Z,{variant:"contained",onClick:()=>{if(ex()){var i,t,s,n,r,l;let a={...e.prefill,id:null===(i=e.prefill)||void 0===i?void 0:i.id,sessionName:p,sessionDescription:g,sessionSlug:o.slug,sessionStartTime:I.set("second",0).toDate(),sessionDurationMins:ee,remoteConfiguration:D,facilitatorEmail:P,location:eu,anticipatedParticipants:ep,sessionGraphicAltText:null===(t=e.prefill)||void 0===t?void 0:t.sessionGraphicAltText,sessionPresentationUris:o.uris,answers:null!==(l=null===(s=e.prefill)||void 0===s?void 0:s.answers)&&void 0!==l?l:[],audience:j,facilitationState:(null===(n=e.prefill)||void 0===n?void 0:n.facilitationState)!==void 0?e.prefill.facilitationState:h._y.Ready,fullScreen:(null===(r=e.prefill)||void 0===r?void 0:r.fullScreen)===void 0||e.prefill.fullScreen};e.onSubmitRequest(a)}},disabled:e.busy,children:"Submit"})]})]})})}function ec(e){let i="".concat(100*e.menuWidth,"%"),t="".concat((1-e.menuWidth)*100,"%");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"row",overflow:"hidden",height:"100vh",gap:2,px:1,...e.sx},children:[(0,l.jsx)(S.Z,{sx:{width:i,height:"100%",display:"block",overflowY:"auto"},children:e.menu}),(0,l.jsx)(S.Z,{sx:{width:t,height:"100%",display:"block",overflowY:"auto"},children:e.main})]})})}var ed=t(99341);let eu=e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"][e];function eh(){let{api:e,start:i}=(0,ed.Z)(),t=(0,d.useContext)(v),[s,n]=(0,d.useState)(!1),[o,r]=(0,d.useState)([]),[c,u]=(0,d.useState)({}),[p,f]=(0,d.useState)({}),[x,m]=(0,d.useState)(),[g,w]=(0,d.useState)(!1),[Z,k]=(0,d.useState)(!1),[T,R]=(0,d.useState)(""),[W,I]=(0,d.useState)(),[_,L]=(0,d.useState)(!1),O=(0,U.useSearchParams)(),[N,q]=(0,d.useState)(0);(0,d.useEffect)(()=>{let e=O.get("flags"),i=0;e&&(e.includes("m")&&(i|=2),e.includes("a")&&(i|=1),q(i))},[O]);let z=()=>{o.forEach(t=>{let s=(0,D.X)(t.sessionPresentationUris[0]);if(!c.hasOwnProperty(s)){let n={workshopDirectory:s};i(e.postPublicContentAccessRequest(t.id,n)).then(e=>{u(i=>{let t={...i};return t[n.workshopDirectory]={thumb:e.thumbnailUrl,poster:e.posterUrl},t})})}})},G=e=>{var i;let t=(0,D.X)(e.sessionPresentationUris[0]),s=c.hasOwnProperty(t)?c[t]:void 0;return null!==(i=null==s?void 0:s.thumb)&&void 0!==i?i:null==s?void 0:s.poster},Q=e=>{let i={};return e.forEach(e=>{let t=new Date(e.sessionStartTime).toLocaleDateString("en-GB",{month:"long",year:"numeric"});i[t]||(i[t]=[]),i[t].push(e)}),console.debug("sessions grouped by month",i),i},M=async()=>{try{console.debug("Fetching sessions..."),r([]),n(!0);let s=await i(e.listDeliberationSessions(t.user.access_token,h.yI.Upcoming));console.debug("Sessions",s);let o=s.filter(e=>e.audience!==h.EQ.AutomatedTests||1&N&&e.audience===h.EQ.AutomatedTests).toSorted((e,i)=>new Date(e.sessionStartTime).getTime()-new Date(i.sessionStartTime).getTime());r(o)}catch(e){console.error(e)}finally{n(!1)}};(0,d.useEffect)(()=>{m(void 0),z(),f(Q(o))},[o]),(0,d.useEffect)(()=>{M()},[]);let J=async s=>{console.debug("New session submitted",s);try{if(L(!0),!(void 0===s.id?await i(e.postDeliberationSessionAdmin(t.user.access_token,s)):await i(e.putDeliberationSessionAdmin(t.user.access_token,s))).id)throw"Session creation failed.";w(!1),R("Session submitted successfully."),k(!0),M()}catch(e){console.error(e),R("Session submission failed. Please contact support."),k(!0)}finally{L(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ea,{open:g,busy:_,onCloseRequest:()=>{w(!1)},onClearRequest:()=>{I(void 0)},onSubmitRequest:J,prefill:W}),(0,l.jsx)(C.Z,{open:Z,autoHideDuration:6e3,onClose:()=>k(!1),message:T}),(0,l.jsx)(ec,{menuWidth:.5,menu:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(j.Z,{variant:"h4",children:"Upcoming workshops"}),(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:[(0,l.jsx)(a.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>{I(void 0),w(!0)},disabled:s,children:"Add"}),(0,l.jsx)(a.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>{M()},disabled:s,children:"Refresh"})]})]}),s&&(0,l.jsx)(E.Z,{}),(0,l.jsx)(b.Z,{subheader:(0,l.jsx)("li",{}),children:!!p&&Object.keys(p).map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("ul",{children:[(0,l.jsx)(A.Z,{sx:{background:"transparent",borderBottom:"solid 1px grey",backdropFilter:"blur(5px)",p:1,my:2},children:(0,l.jsx)(j.Z,{variant:"h6",children:e})}),p[e].map((e,i)=>(0,l.jsx)(y.Z,{alignItems:"center",onClick:()=>m(e),selected:(null==x?void 0:x.id)===e.id,children:(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"row",gap:1,width:"100%"},children:[(0,l.jsxs)(S.Z,{sx:{alignSelf:"center",alignItems:"center",borderRight:"solid 2px lightGray",display:"flex",flexDirection:"column",gap:0,px:1},children:[(0,l.jsx)(j.Z,{variant:"body2",children:eu(new Date(e.sessionStartTime).getDay())}),(0,l.jsx)(j.Z,{variant:"h4",children:new Date(e.sessionStartTime).getDate()})]}),(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:1,flexGrow:1},children:[(0,l.jsx)(j.Z,{variant:"body1",children:e.sessionName}),(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:.5,rowGap:.5},children:[(0,l.jsx)(P.Z,{component:"span",size:"small",label:h._y[e.facilitationState],color:"primary"}),(0,l.jsx)(P.Z,{component:"span",size:"small",label:h.VS[e.remoteConfiguration],color:"primary"}),(0,l.jsx)(P.Z,{component:"span",size:"small",label:h.EQ[e.audience],color:e.audience===h.EQ.LiveWorkshop?"error":void 0}),(0,l.jsx)(P.Z,{component:"span",size:"small",label:new Date(e.sessionStartTime).toLocaleTimeString()})]}),(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:.5,rowGap:.5},children:[e.facilitatorEmail&&(0,l.jsx)(P.Z,{component:"span",size:"small",label:e.facilitatorEmail,color:"secondary"}),e.location&&(0,l.jsx)(P.Z,{component:"span",size:"small",label:e.location,color:"secondary"})]})]})]}),G(e)&&(0,l.jsx)("img",{style:{maxWidth:100,height:"auto",alignSelf:"start",justifySelf:"end"},src:G(e),alt:e.sessionGraphicAltText})]})},"session-button-".concat(i)))]})},"overview-month-".concat(e)))})]}),main:x&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(F,{session:x,onEditSession:e=>{I(e),w(!0)},onDeleteSession:e=>{}})})})]})}(n=r||(r={}))[n.ShowAutomatedTesting=1]="ShowAutomatedTesting",n[n.ShowManualTesting=2]="ShowManualTesting";var ep=t(95107);function ef(e){let i=(0,d.useContext)(v),{api:t,start:s}=(0,ed.Z)(),[n,o]=(0,d.useState)([]),[r,c]=(0,d.useState)([]),[u,p]=(0,d.useState)(!1);(0,d.useEffect)(()=>{f()},[]);let f=()=>{p(!0),o([]),e.onSelection(void 0),s(t.listDeliberationSessions(i.user.access_token,h.yI.Answered)).then(e=>o(e)).catch(e=>{console.error(e)}).finally(()=>{p(!1)})};(0,d.useEffect)(()=>{c(n.filter(e=>e.audience!==h.EQ.AutomatedTests).sort((e,i)=>new Date(e.sessionStartTime).getTime()-new Date(i.sessionStartTime).getTime()).reverse().map(e=>({id:e.id,workshop:e.sessionName,start:new Date(e.sessionStartTime).toLocaleDateString()+" "+new Date(e.sessionStartTime).toLocaleTimeString(),audience:h.EQ[e.audience],location:e.location,participants:new Set(e.answers.map(e=>e.participantId)).size,questions:new Set(e.answers.map(e=>e.questionId)).size})))},[n]);let x=i=>{let t=n.find(e=>e.id===i);e.onSelection(t)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(S.Z,{sx:{py:1,minHeight:"100%",display:"flex",flexDirection:"column",gap:1},children:[(0,l.jsxs)(S.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(j.Z,{variant:"h4",children:"Available reports"}),(0,l.jsx)(S.Z,{display:"flex",flexDirection:"row",gap:1,children:(0,l.jsx)(a.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>{f()},disabled:u,children:"Refresh"})})]}),u&&(0,l.jsx)(E.Z,{}),(0,l.jsx)(ep._,{sx:{flexGrow:1},rows:r,columns:[{editable:!1,field:"start",headerName:"Start",width:175},{editable:!1,field:"workshop",headerName:"Workshop",width:250},{editable:!1,field:"audience",headerName:"Audience",width:150},{editable:!1,field:"location",headerName:"Location",width:150},{editable:!1,field:"participants",headerName:"Participants",width:75},{editable:!1,field:"questions",headerName:"Questions",width:75}],hideFooter:!0,onRowClick:(e,i,t)=>x(e.row.id)})]})})}let ex=e=>{if(null==e||""===e)return;let i=h.gY[e];if(void 0===i)throw console.error("Unknown report type: ".concat(e)),"Unknown report type: ".concat(e);return i},em=e=>{let i="report-".concat(e.sessionId,"-").concat(e.reportType,".json"),t="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e))),s=document.createElement("a");s.href=t,s.download=i,s.click()},eg=e=>{let i=Object.keys(e[0]);return[i,...e.map(e=>i.map(i=>e[i]))]},ev=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map(e=>e.map(e=>e&&isNaN(e)?'"'.concat(e.replace(/"/g,'""'),'"'):e).join(i)).join("\n")},ew=e=>{let i=ev(eg(e.report)),t="report-".concat(e.sessionId,"-").concat(e.reportType,".csv"),s=document.createElement("a");s.href="data:text/csv;charset=utf-8,".concat(i),s.download=t,s.click()};function eb(e){let{api:i,start:t}=(0,ed.Z)(),s=(0,d.useContext)(v),[n,o]=(0,d.useState)(!1),[r,c]=(0,d.useState)(""),[u,p]=(0,d.useState)(),[f,x]=(0,d.useState)(),[m,g]=(0,d.useState)("");(0,d.useEffect)(()=>{console.debug("AnalystSessionPreview",e.session),console.debug("Groups",s.user.profile["cognito:groups"])},[e.session]),(0,d.useEffect)(()=>{c(""),p(void 0),x(void 0)},[e.session]),(0,d.useEffect)(()=>{g(""),x(void 0),void 0!==u&&(o(!0),w(u).then(e=>{x(e)}).catch(e=>{console.error(e),g("Unable to retrieve report: ".concat(JSON.stringify(e)))}).finally(()=>{o(!1)}))},[u]);let w=async n=>await t(i.getReport(e.session.id,s.user.access_token,n));return(0,d.useEffect)(()=>{f?g(JSON.stringify(f,null,2)):g("")},[f]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",gap:1,minHeight:"100%",py:1},children:[(0,l.jsx)(j.Z,{variant:"h4",children:"Session report"}),(0,l.jsx)(j.Z,{variant:"h5",children:e.session.sessionName}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:["Audience: ",h.EQ[e.session.audience]]}),(0,l.jsxs)("li",{children:["Location: ",e.session.location]}),(0,l.jsxs)("li",{children:["Facilitator: ",e.session.facilitatorEmail]}),(0,l.jsxs)("li",{children:["Start: ",new Date(e.session.sessionStartTime).toLocaleDateString()+" "+new Date(e.session.sessionStartTime).toLocaleTimeString()]}),(0,l.jsxs)("li",{children:["Unique participants: ",new Set(e.session.answers.map(e=>e.participantId)).size]}),(0,l.jsxs)("li",{children:["Questions answered: ",new Set(e.session.answers.map(e=>e.questionId)).size," (non PII)"]})]}),(0,l.jsxs)(Q.Z,{fullWidth:!0,children:[(0,l.jsx)(M.Z,{id:"report-select-label",children:"Report"}),(0,l.jsxs)(J.Z,{labelId:"report-select-label",id:"report-select",value:r,label:"Report",onChange:(e,i)=>{c(e.target.value),p(ex(e.target.value))},children:[(0,l.jsx)(V.Z,{value:h.gY[h.gY.ContactAndConsent],children:"Contact and consent"}),(0,l.jsx)(V.Z,{value:h.gY[h.gY.EnjoymentAndSatisfaction],children:"Enjoyment and satisfaction"})]})]}),n&&(0,l.jsx)(E.Z,{}),f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S.Z,{sx:{background:"white",border:"solid 1px grey",borderRadius:1,p:1,overflowX:"auto",flexGrow:1},children:(0,l.jsx)("pre",{children:m})}),(0,l.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1,rowGap:1},children:[(0,l.jsx)(a.Z,{variant:"contained",onClick:()=>ew(f),children:"Download CSV"}),(0,l.jsx)(a.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>em(f),children:"Download JSON"})]})]})]})})}function ey(){let[e,i]=(0,d.useState)(),[t,s]=(0,d.useState)(void 0);return(0,d.useEffect)(()=>{i(t&&(0,l.jsx)(eb,{session:t}))},[t]),(0,l.jsx)(ec,{menuWidth:.5,menu:(0,l.jsx)(ef,{onSelection:s}),main:e})}function ej(){(0,d.useContext)(v);let[e,i]=(0,d.useState)(o.Workshops),[t,s]=(0,d.useState)((0,l.jsx)(eh,{}));return(0,d.useEffect)(()=>{void 0!==document&&(document.title="Facilitator overview")},[]),(0,d.useEffect)(()=>{switch(e){case o.Workshops:s((0,l.jsx)(eh,{}));break;case o.Reports:s((0,l.jsx)(ey,{}));break;default:throw"".concat(o[e]," not implemented.")}},[e]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(w,{role:h._b.Controller,children:(0,l.jsx)(ec,{sx:{background:"linear-gradient(270deg, rgba(0, 0, 255, 0.25) 0%, rgba(0, 0, 255, 0.00) 50%, rgba(0, 0, 255, 0.00) 100%)"},menu:(0,l.jsx)(T,{onSetSelection:i,showUsername:!0,showSignOut:!0}),menuWidth:.2,main:t})})})}},69026:function(e,i,t){"use strict";t.d(i,{N:function(){return o},Z:function(){return r}});var s=t(94547),n=t(60658);let o=(e,i)=>{let{sid:t,pid:s,qid:n}=e;return{id:void 0,created:void 0,questionId:n,participantId:s,jsonValue:void 0,mimeType:void 0,pII:i}};class r{getServerTime(){return(0,n.L)({baseUri:this.baseUri,title:"getServerTime",method:"GET",path:"/utils/servertime"})}postDeliberationSessionAdmin(e,i){return(0,n.L)({baseUri:this.baseUri,title:"postDeliberationSessionAdmin",method:"POST",path:"/sessions/admin",body:i,accessToken:e})}putDeliberationSessionAdmin(e,i){return(0,n.L)({baseUri:this.baseUri,title:"putDeliberationSessionAdmin",method:"PUT",path:"/sessions/admin/".concat(i.id),body:i,accessToken:e})}postFacilitatorAction(e,i,t){return(0,n.L)({baseUri:this.baseUri,title:"postFacilitatorAction",description:t.action,method:"POST",path:"/sessions/admin/actions/".concat(t.sessionId),body:t,group:"FacilitatorAction",accessToken:e,sessionToken:i})}getDeliberationSessionAdmin(e,i){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationSessionAdmin",description:i?"(with access token)":void 0,method:"GET",path:"/sessions/admin/".concat(e),accessToken:i})}listDeliberationSessions(e,i){return(0,n.L)({baseUri:this.baseUri,title:"listDeliberationSessions",description:s.yI[i],method:"GET",path:"/sessions/list/".concat(s.yI[i]),accessToken:e})}getDeliberationSession(e,i){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationSession",description:i?"(with access token)":"",method:"GET",path:"/sessions/".concat(e),accessToken:i})}retrieveMeetingAttendeeData(e,i,t,s,o){let r=o?"".concat(this.baseUri,"/sessions/admin/").concat(e,"/attendee"):"".concat(this.baseUri,"/sessions/").concat(e,"/attendee");return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationSessionMeeting",method:"GET",path:r,body:{name:s,participantId:t},sessionToken:i,accessToken:o})}exchangeJoinCodeForSessionToken(e){return(0,n.L)({baseUri:this.baseUri,title:"exchangeJoinCodeForSessionToken",method:"POST",path:"/sessions/".concat(e.sessionId,"/token"),body:e})}postDeliberationAnswer(e,i,t){let s=i.questionId;return(0,n.L)({baseUri:this.baseUri,title:"postDeliberationAnswer",method:"POST",path:"/sessions/".concat(e,"/questions/").concat(s,"/answers"),body:i,sessionToken:t})}getDeliberationAnswer(e,i,t,s){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationAnswer",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(i,"/answers?pid=").concat(t),sessionToken:s})}getDeliberationAnswersForQuestion(e,i,t){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationAnswersForQuestion",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(i,"/answers"),sessionToken:t})}getDeliberationAnswersForParticipant(e,i,t){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationAnswersForParticipant",method:"GET",path:"/sessions/".concat(e,"/participants/").concat(i,"/answers"),sessionToken:t})}postWorkshopContentAccessRequest(e,i,t){return(0,n.L)({baseUri:this.baseUri,title:"postWorkshopContentAccessRequest",description:"".concat(t.objectKeys.length," items"),method:"POST",path:"/sessions/".concat(e,"/content"),body:t,sessionToken:i})}postPublicContentAccessRequest(e,i){return(0,n.L)({baseUri:this.baseUri,title:"postPublicContentAccessRequest",description:"".concat(i.workshopDirectory),method:"POST",path:"/sessions/".concat(e,"/content/public"),body:i})}getReport(e,i,t){return(0,n.L)({baseUri:this.baseUri,title:"getReport",description:s.gY[t],method:"GET",path:"/sessions/admin/".concat(e,"/report/").concat(s.gY[t]),accessToken:i})}getMediaUploadUrl(e,i,t,s,o,r){return(0,n.L)({baseUri:this.baseUri,title:"getMediaUploadUrl",method:"POST",path:"/sessions/admin/".concat(e,"/upload"),body:{sessionId:e,section:s,filenamePart:o,filenameSuffix:r},accessToken:t,sessionToken:i})}constructor(e){this.baseUri=e}}},60658:function(e,i,t){"use strict";t.d(i,{L:function(){return n},P:function(){return o}});var s=t(2057);let n=function(e){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=async()=>{var i;let t={method:e.method,headers:{"Content-Type":null!==(i=e.contentType)&&void 0!==i?i:"application/json"}};e.body&&(t.body=JSON.stringify(e.body)),e.accessToken&&(t.headers.Authorization="Bearer ".concat(e.accessToken)),e.sessionToken&&(t.headers["X-Deliberation-Session-Token"]=e.sessionToken);let s=await fetch("".concat(e.baseUri).concat(e.path),t);if(s.ok)return JSON.parse(await s.text());throw s.statusText};return new s.Z({title:e.title,description:e.description,action:t,retries:i?"indefinite":3,delay_ms:2e3})},o=function(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.size)throw"Blob is empty";let n=async()=>{console.debug("Ready to upload ".concat(e.size," bytes..."));let t=await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:e});if(!t.ok)throw t.statusText;return console.debug("Upload complete."),{size:e.size,target:i,method:"PUT",response:t}};return new s.Z({title:"Put: ".concat(i),description:"".concat(e.size," bytes"),action:n,retries:t?"indefinite":3,delay_ms:2e3})}},2057:function(e,i,t){"use strict";var s,n;t.d(i,{Z:function(){return o},l:function(){return s}}),(n=s||(s={}))[n.Ready=0]="Ready",n[n.Running=1]="Running",n[n.Success=2]="Success",n[n.Waiting=3]="Waiting",n[n.Failed=4]="Failed",n[n.Cancelled=5]="Cancelled";class o{setState(e){var i,t;console.debug("Task ".concat(this.initProps.title),"(".concat(this.initProps.description,")"),s[e]),this.state=e,null===(t=this.runProps)||void 0===t||null===(i=t.onStateChange)||void 0===i||i.call(t,e)}cancel(){return 3===this.state&&(this.setState(5),!0)}async run(e){var i,t,s,n,o,r;this.runProps=e;do try{this.attempts++,this.promise=this.initProps.action(),this.result=await this.promise,this.setState(2)}catch(e){this.error=e,this.attempts<=("indefinite"===this.initProps.retries?50:this.initProps.retries)?(this.setState(3),await new Promise(e=>{var i;return setTimeout(e,(null!==(i=this.initProps.delay_ms)&&void 0!==i?i:0)*this.attempts)})):this.setState(4)}while(3===this.state);switch(this.state){case 2:return await (null===(t=this.runProps)||void 0===t?void 0:null===(i=t.onSuccess)||void 0===i?void 0:i.call(t,this.result)),this.result;case 4:throw await (null===(n=this.runProps)||void 0===n?void 0:null===(s=n.onFailure)||void 0===s?void 0:s.call(n,this.error)),this.error;case 5:throw await (null===(r=this.runProps)||void 0===r?void 0:null===(o=r.onCancelled)||void 0===o?void 0:o.call(r)),"Task cancelled";default:throw"Unexpected state after attempt loop: ".concat(this.state)}}constructor(e){this.attempts=0,this.state=0,this.initProps=e,this.group=e.group,console.debug("Task ".concat(this.initProps.title),"(".concat(this.initProps.description,")"),s[this.state])}}},99341:function(e,i,t){"use strict";t.d(i,{Z:function(){return r}});var s=t(2265),n=t(2057),o=t(69026);function r(){let[e,i]=(0,s.useState)(new o.Z("https://hf3n3vkh6g.execute-api.eu-west-2.amazonaws.com/prod")),[t,r]=(0,s.useState)([]),l=async()=>{r([...t])};return{api:e,start:async e=>{if(void 0!==e.group){let i=t.filter(i=>i.group===e.group);i.length>0&&(i.forEach(e=>e.cancel()),await Promise.allSettled(i.filter(e=>void 0!==e.promise).map(e=>e.promise)))}return r([...t,e]),e.run({onStateChange:l})},allTasks:t,startedTasks:t.filter(e=>e.state===n.l.Running),waitingTasks:t.filter(e=>e.state===n.l.Waiting),succeededTasks:t.filter(e=>e.state===n.l.Success),failedTasks:t.filter(e=>e.state===n.l.Failed),cancelledTasks:t.filter(e=>e.state===n.l.Cancelled)}}},94547:function(e,i,t){"use strict";var s,n,o,r,l,a,c,d,u,h,p,f,x,m,g,v;t.d(i,{EQ:function(){return n},SC:function(){return d},VS:function(){return r},_b:function(){return s},_y:function(){return o},gY:function(){return a},um:function(){return l},yI:function(){return c}}),(u=s||(s={}))[u.Controller=0]="Controller",u[u.Client=1]="Client",(h=n||(n={}))[h.LiveWorkshop=0]="LiveWorkshop",h[h.AutomatedTests=1]="AutomatedTests",h[h.TestingWorkshop=2]="TestingWorkshop",h[h.DemoWorkshop=3]="DemoWorkshop",(p=o||(o={}))[p.Absent=0]="Absent",p[p.Ready=1]="Ready",p[p.Open=2]="Open",p[p.Closed=3]="Closed",(f=r||(r={}))[f.InPerson=0]="InPerson",f[f.Remote=1]="Remote",f[f.RemoteWithVideoCall=2]="RemoteWithVideoCall",(x=l||(l={}))[x.Offline=0]="Offline",x[x.Online=1]="Online",x[x.Connecting=2]="Connecting",x[x.Connected=3]="Connected",x[x.Joining=4]="Joining",x[x.Joined=5]="Joined",x[x.Disconnecting=6]="Disconnecting",x[x.Disconnected=7]="Disconnected",x[x.Error=8]="Error",(m=a||(a={}))[m.ContactAndConsent=0]="ContactAndConsent",m[m.EnjoymentAndSatisfaction=1]="EnjoymentAndSatisfaction",(g=c||(c={}))[g.All=0]="All",g[g.Upcoming=1]="Upcoming",g[g.Past=2]="Past",g[g.Answered=3]="Answered",(v=d||(d={})).facilitators="facilitators",v.analysts="analysts",v.administrators="administrators"},75511:function(e,i,t){"use strict";t.d(i,{z:function(){return n}});var s,n,o=t(37836),r=t.n(o);(s=n||(n={})).Request_SlideRefresh="REQUEST_SLIDE_REFRESH",s.WSS_Update_ConnectionState="WSS_UPDATE_CONNECTION_STATE",s.WSS_Distribute_Message="WSS_DISTRIBUTE_MESSAGE",s.Content_Progress_Update="CONTENT_PROGRESS_UPDATE";let l=new(r()),a={on:(e,i)=>l.on(e,i),once:(e,i)=>l.once(e,i),off:(e,i)=>l.off(e,i),emit:e=>l.emit(e.type,e)};Object.freeze(a),i.Z=a},88620:function(e,i,t){"use strict";t.d(i,{Z:function(){return u}});var s=t(57437),n=t(75511),o=t(22960),r=t(31193),l=t(34990),a=t(80511),c=t(99128),d=t(2265);function u(e){var i;let[t,u]=(0,d.useState)(),[h,p]=(0,d.useState)({overall:{completed:0,total:100},bars:{}});(0,d.useEffect)(()=>(n.Z.on(n.z.Content_Progress_Update,u),()=>{n.Z.off(n.z.Content_Progress_Update,u)}),[]),(0,d.useEffect)(()=>{void 0!==t&&t.type===n.z.Content_Progress_Update&&p(t.data)},[t]);let f=(0,o.Z)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.Z,{sx:{alignSelf:"center",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100%",width:"60%",maxWidth:"480px"},children:(0,s.jsxs)(l.Z,{elevation:1,sx:{p:2,flexGrow:1,textAlign:"start"},children:[(0,s.jsx)(a.Z,{component:"h2",variant:"h5",sx:{mb:2},style:{textAlign:"center"},children:e.title}),(0,s.jsx)(a.Z,{variant:"body1",children:(0,s.jsx)("span",{style:{color:e.isError?f.palette.error.main:"inherit"},children:null!==(i=e.message)&&void 0!==i?i:"Unknown error."})}),e.children&&(0,s.jsx)(r.Z,{sx:{my:1},children:e.children}),e.isBusy&&!e.showProgress&&(0,s.jsx)(c.Z,{sx:{mt:2}}),e.isBusy&&e.showProgress&&(0,s.jsx)(c.Z,{sx:{mt:2},value:h.overall.total>0?100*h.overall.completed/h.overall.total:void 0,variant:h.overall.total>0?"determinate":"indeterminate"}),e.isBusy&&e.showProgress&&Object.keys(h.bars).map((e,i)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.Z,{color:"secondary",sx:{mt:1},value:h.bars[e].total>0?100*h.bars[e].completed/h.bars[e].total:0,variant:"determinate"},"loading-progress-bar-".concat(i,"-").concat(e))}))]})})})}},10105:function(e,i,t){"use strict";t.d(i,{k:function(){return n},v:function(){return s}});let s=e=>"".concat(window.location.href.split("/")[0],"//").concat(window.location.href.split("/")[2],"/participant/session?sid=").concat(e.id,"&code=").concat(e.joinCode),n=e=>"".concat(window.location.href.split("/")[0],"//").concat(window.location.href.split("/")[2],"/facilitator/session?sid=").concat(e.id,"&code=").concat(e.joinCode)},20909:function(e,i,t){"use strict";t.d(i,{X:function(){return s}});let s=e=>e.split("/").at(-2)}},function(e){e.O(0,[732,887,403,465,810,516,107,842,971,23,744],function(){return e(e.s=7251)}),_N_E=e.O()}]);