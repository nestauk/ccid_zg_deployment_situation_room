"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{69026:function(e,t,s){s.d(t,{N:function(){return o},Z:function(){return r}});var i=s(94547),n=s(60658);let o=(e,t)=>{let{sid:s,pid:i,qid:n}=e;return{id:void 0,created:void 0,questionId:n,participantId:i,jsonValue:void 0,mimeType:void 0,pII:t}};class r{getServerTime(){return(0,n.L)({baseUri:this.baseUri,title:"getServerTime",method:"GET",path:"/utils/servertime"})}postDeliberationSessionAdmin(e,t){return(0,n.L)({baseUri:this.baseUri,title:"postDeliberationSessionAdmin",method:"POST",path:"/sessions/admin",body:t,accessToken:e})}putDeliberationSessionAdmin(e,t){return(0,n.L)({baseUri:this.baseUri,title:"putDeliberationSessionAdmin",method:"PUT",path:"/sessions/admin/".concat(t.id),body:t,accessToken:e})}postFacilitatorAction(e,t,s){return(0,n.L)({baseUri:this.baseUri,title:"postFacilitatorAction",description:s.action,method:"POST",path:"/sessions/admin/actions/".concat(s.sessionId),body:s,group:"FacilitatorAction",accessToken:e,sessionToken:t})}getDeliberationSessionAdmin(e,t){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationSessionAdmin",description:t?"(with access token)":void 0,method:"GET",path:"/sessions/admin/".concat(e),accessToken:t})}listDeliberationSessions(e,t){return(0,n.L)({baseUri:this.baseUri,title:"listDeliberationSessions",description:i.yI[t],method:"GET",path:"/sessions/list/".concat(i.yI[t]),accessToken:e})}getDeliberationSession(e,t){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationSession",description:t?"(with access token)":"",method:"GET",path:"/sessions/".concat(e),accessToken:t})}retrieveMeetingAttendeeData(e,t,s,i,o){let r=o?"".concat(this.baseUri,"/sessions/admin/").concat(e,"/attendee"):"".concat(this.baseUri,"/sessions/").concat(e,"/attendee");return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationSessionMeeting",method:"GET",path:r,body:{name:i,participantId:s},sessionToken:t,accessToken:o})}exchangeJoinCodeForSessionToken(e){return(0,n.L)({baseUri:this.baseUri,title:"exchangeJoinCodeForSessionToken",method:"POST",path:"/sessions/".concat(e.sessionId,"/token"),body:e})}postDeliberationAnswer(e,t,s){let i=t.questionId;return(0,n.L)({baseUri:this.baseUri,title:"postDeliberationAnswer",method:"POST",path:"/sessions/".concat(e,"/questions/").concat(i,"/answers"),body:t,sessionToken:s})}getDeliberationAnswer(e,t,s,i){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationAnswer",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(t,"/answers?pid=").concat(s),sessionToken:i})}getDeliberationAnswersForQuestion(e,t,s){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationAnswersForQuestion",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(t,"/answers"),sessionToken:s})}getDeliberationAnswersForParticipant(e,t,s){return(0,n.L)({baseUri:this.baseUri,title:"getDeliberationAnswersForParticipant",method:"GET",path:"/sessions/".concat(e,"/participants/").concat(t,"/answers"),sessionToken:s})}postWorkshopContentAccessRequest(e,t,s){return(0,n.L)({baseUri:this.baseUri,title:"postWorkshopContentAccessRequest",description:"".concat(s.objectKeys.length," items"),method:"POST",path:"/sessions/".concat(e,"/content"),body:s,sessionToken:t})}postPublicContentAccessRequest(e,t){return(0,n.L)({baseUri:this.baseUri,title:"postPublicContentAccessRequest",description:"".concat(t.workshopDirectory),method:"POST",path:"/sessions/".concat(e,"/content/public"),body:t})}getReport(e,t,s){return(0,n.L)({baseUri:this.baseUri,title:"getReport",description:i.gY[s],method:"GET",path:"/sessions/admin/".concat(e,"/report/").concat(i.gY[s]),accessToken:t})}getMediaUploadUrl(e,t,s,i,o,r){return(0,n.L)({baseUri:this.baseUri,title:"getMediaUploadUrl",method:"POST",path:"/sessions/admin/".concat(e,"/upload"),body:{sessionId:e,section:i,filenamePart:o,filenameSuffix:r},accessToken:s,sessionToken:t})}constructor(e){this.baseUri=e}}},60658:function(e,t,s){s.d(t,{L:function(){return n},P:function(){return o}});var i=s(2057);let n=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=async()=>{var t;let s={method:e.method,headers:{"Content-Type":null!==(t=e.contentType)&&void 0!==t?t:"application/json"}};e.body&&(s.body=JSON.stringify(e.body)),e.accessToken&&(s.headers.Authorization="Bearer ".concat(e.accessToken)),e.sessionToken&&(s.headers["X-Deliberation-Session-Token"]=e.sessionToken);let i=await fetch("".concat(e.baseUri).concat(e.path),s);if(i.ok)return JSON.parse(await i.text());throw i.statusText};return new i.Z({title:e.title,description:e.description,action:s,retries:t?"indefinite":3,delay_ms:2e3,max_delay_ms:6e3})},o=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.size)throw"Blob is empty";let n=async()=>{console.debug("Ready to upload ".concat(e.size," bytes..."));let s=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:e});if(!s.ok)throw s.statusText;return console.debug("Upload complete."),{size:e.size,target:t,method:"PUT",response:s}};return new i.Z({title:"Put: ".concat(t),description:"".concat(e.size," bytes"),action:n,retries:s?"indefinite":3,delay_ms:2e3})}},2057:function(e,t,s){var i,n;s.d(t,{Z:function(){return o},l:function(){return i}}),(n=i||(i={}))[n.Ready=0]="Ready",n[n.Running=1]="Running",n[n.Success=2]="Success",n[n.Waiting=3]="Waiting",n[n.Failed=4]="Failed",n[n.Cancelled=5]="Cancelled";class o{setState(e){var t,s;console.debug("Task ".concat(this.initProps.title),"(".concat(this.initProps.description,")"),i[e]),this.state=e,null===(s=this.runProps)||void 0===s||null===(t=s.onStateChange)||void 0===t||t.call(s,e)}cancel(){return 3===this.state&&(this.setState(5),!0)}getNextDelay(){var e,t,s;return Math.min((null!==(e=this.initProps.delay_ms)&&void 0!==e?e:0)*this.attempts,null!==(s=null!==(t=this.initProps.max_delay_ms)&&void 0!==t?t:this.initProps.delay_ms)&&void 0!==s?s:0)}async run(e){var t,s,i,n,o,r;this.runProps=e;do try{this.attempts++,this.promise=this.initProps.action(),this.result=await this.promise,this.setState(2)}catch(e){this.error=e,this.attempts<=("indefinite"===this.initProps.retries?50:this.initProps.retries)?(this.setState(3),await new Promise(e=>setTimeout(e,this.getNextDelay()))):this.setState(4)}while(3===this.state);switch(this.state){case 2:return await (null===(s=this.runProps)||void 0===s?void 0:null===(t=s.onSuccess)||void 0===t?void 0:t.call(s,this.result)),this.result;case 4:throw await (null===(n=this.runProps)||void 0===n?void 0:null===(i=n.onFailure)||void 0===i?void 0:i.call(n,this.error)),this.error;case 5:throw await (null===(r=this.runProps)||void 0===r?void 0:null===(o=r.onCancelled)||void 0===o?void 0:o.call(r)),"Task cancelled";default:throw"Unexpected state after attempt loop: ".concat(this.state)}}constructor(e){this.attempts=0,this.state=0,this.initProps=e,this.group=e.group,console.debug("Task ".concat(this.initProps.title),"(".concat(this.initProps.description,")"),i[this.state])}}},67506:function(e,t,s){s.d(t,{G:function(){return d},Z:function(){return u}});var i,n,o=s(57437),r=s(2265),a=s(80237),c=s(75511),l=s(99341);let d=(0,r.createContext)({});function u(e){var t;let{api:s,start:i}=(0,l.Z)(),[u,h]=(0,r.useState)(0),[p,m]=(0,r.useState)(),[b,f]=(0,r.useState)(null!==(t=e.checks)&&void 0!==t?t:3);(0,r.useEffect)(()=>{switch(console.debug("ZgServerTimeProvider state",n[u]),u){case 0:c.Z.emit({type:c.z.Content_Progress_Update,data:{overall:{completed:0,total:b},bars:{}}}),h(1);break;case 1:g().then(e=>{m(e),h(3)}).catch(e=>{console.error(e),h(2)})}},[u]);let g=async()=>{switch(e.mode){case"server-date-lib":return v();case"zg-server-time":return S();default:throw Error("Unsupported time sync mode")}},S=async()=>{let e;console.debug("zg-server-time warmup",await i(s.getServerTime()));let t=Number.MAX_SAFE_INTEGER,n=0;for(let o=0;o<b;o++){let r=Date.now(),a=await i(s.getServerTime()),l=Date.now();console.debug("zg-server-time response",a);let d=l-r,u=(r+l)/2,h=a.timestamp-u;d<t&&(t=d,n=h,e=a),c.Z.emit({type:c.z.Content_Progress_Update,data:{overall:{completed:o+1,total:b},bars:{}}}),await new Promise(e=>setTimeout(e,1e3))}let o={offset:n,rtt:t,source:e,toServerTime:e=>e+n,fromServerTime:e=>e-n};return console.debug("zg-server-time result",o),o},v=async()=>{let e;console.warn("ServerDateLib is only accurate to the second.");for(let t=0;t<b;t++){await new Promise(e=>setTimeout(e,1e3));let s=await (0,a.a)();(void 0===e||Math.abs(s.uncertainty)<Math.abs(e.uncertainty))&&(e=s),c.Z.emit({type:c.z.Content_Progress_Update,data:{overall:{completed:t+1,total:b},bars:{}}})}let t={offset:e.offset,source:e,rtt:e.uncertainty,toServerTime:t=>t+e.offset,fromServerTime:t=>t-e.offset};return console.debug("server-date result",e),t};return(0,o.jsxs)(o.Fragment,{children:[(0===u||1===u)&&e.loading,2===u&&e.error,3===u&&(0,o.jsx)(d.Provider,{value:p,children:e.children})]})}(i=n||(n={}))[i.Init=0]="Init",i[i.Synchronising=1]="Synchronising",i[i.Error=2]="Error",i[i.Complete=3]="Complete"},99341:function(e,t,s){s.d(t,{Z:function(){return r}});var i=s(2265),n=s(2057),o=s(69026);function r(){let[e,t]=(0,i.useState)(new o.Z("https://hf3n3vkh6g.execute-api.eu-west-2.amazonaws.com/prod")),[s,r]=(0,i.useState)([]),a=async()=>{r([...s])};return{api:e,start:async e=>{if(void 0!==e.group){let t=s.filter(t=>t.group===e.group);t.length>0&&(t.forEach(e=>e.cancel()),await Promise.allSettled(t.filter(e=>void 0!==e.promise).map(e=>e.promise)))}return r([...s,e]),e.run({onStateChange:a})},allTasks:s,startedTasks:s.filter(e=>e.state===n.l.Running),waitingTasks:s.filter(e=>e.state===n.l.Waiting),succeededTasks:s.filter(e=>e.state===n.l.Success),failedTasks:s.filter(e=>e.state===n.l.Failed),cancelledTasks:s.filter(e=>e.state===n.l.Cancelled)}}},94547:function(e,t,s){var i,n,o,r,a,c,l,d,u,h,p,m,b,f,g,S;s.d(t,{EQ:function(){return n},SC:function(){return d},VS:function(){return r},_b:function(){return i},_y:function(){return o},gY:function(){return c},um:function(){return a},yI:function(){return l}}),(u=i||(i={}))[u.Controller=0]="Controller",u[u.Client=1]="Client",(h=n||(n={}))[h.LiveWorkshop=0]="LiveWorkshop",h[h.AutomatedTests=1]="AutomatedTests",h[h.TestingWorkshop=2]="TestingWorkshop",h[h.DemoWorkshop=3]="DemoWorkshop",(p=o||(o={}))[p.Absent=0]="Absent",p[p.Ready=1]="Ready",p[p.Open=2]="Open",p[p.Closed=3]="Closed",(m=r||(r={}))[m.InPerson=0]="InPerson",m[m.Remote=1]="Remote",m[m.RemoteWithVideoCall=2]="RemoteWithVideoCall",(b=a||(a={}))[b.Offline=0]="Offline",b[b.Online=1]="Online",b[b.Connecting=2]="Connecting",b[b.Connected=3]="Connected",b[b.Joining=4]="Joining",b[b.Joined=5]="Joined",b[b.Disconnecting=6]="Disconnecting",b[b.Disconnected=7]="Disconnected",b[b.Error=8]="Error",(f=c||(c={}))[f.ContactAndConsent=0]="ContactAndConsent",f[f.EnjoymentAndSatisfaction=1]="EnjoymentAndSatisfaction",(g=l||(l={}))[g.All=0]="All",g[g.Upcoming=1]="Upcoming",g[g.Past=2]="Past",g[g.Answered=3]="Answered",(S=d||(d={})).facilitators="facilitators",S.analysts="analysts",S.administrators="administrators"},75511:function(e,t,s){s.d(t,{z:function(){return n}});var i,n,o=s(37836),r=s.n(o);(i=n||(n={})).Request_SlideRefresh="REQUEST_SLIDE_REFRESH",i.WSS_Update_ConnectionState="WSS_UPDATE_CONNECTION_STATE",i.WSS_Distribute_Message="WSS_DISTRIBUTE_MESSAGE",i.Content_Progress_Update="CONTENT_PROGRESS_UPDATE";let a=new(r()),c={on:(e,t)=>a.on(e,t),once:(e,t)=>a.once(e,t),off:(e,t)=>a.off(e,t),emit:e=>a.emit(e.type,e)};Object.freeze(c),t.Z=c}}]);